const slidePage = document.querySelector(".slide-page");
const btnNext = document.querySelector(".firstNext");
const submitBtn = document.querySelector(".submit");

// Function to validate email format
function validateEmail(email) {
  return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
}

// Function to validate email and handle redirection
function validateAndRedirect() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  if (!validateEmail(email)) {
    alert("Please enter a valid email address.");
    return;
  }

  // Redirect to www.google.com after successful validation
  window.location.href = "https://www.google.com";
}

// Add keyup event listeners for the "Enter" key
document.getElementById("email").addEventListener("keyup", function (e) {
  if (e.keyCode === 13) {
    e.preventDefault();
    btnNext.click();
  }
});

document.getElementById("password").addEventListener("keyup", function (e) {
  if (e.keyCode === 13) {
    e.preventDefault();
    submitBtn.click();
  }
});

btnNext.addEventListener("click", function () {
  const email = document.getElementById("email").value;

  if (!validateEmail(email)) {
    alert("That Microsoft account doesn't exist.\nEnter a different account or get a new one.");
    return;
  }

  document.getElementById("userLine").textContent = email;
  const t = document.getElementById("section-1");
  const n = document.getElementById("section-2");

  t.style.marginLeft = "-100%";
  t.style.visibility = "hidden";
  n.style.marginLeft = "0%";
  document.getElementById("loginForm").style.height = "403px";
});

submitBtn.addEventListener("click", function () {
  validateAndRedirect();
});
